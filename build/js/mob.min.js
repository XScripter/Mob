/**
 * MobJS 0.2.0
 * Full Featured HTML5 Framework For Building Mobile Apps
 * 
 * https://github.com/XScripter/Mob
 * 
 * Copyright 2015, Clarence Hu
 * The XScripter.com
 * http://www.xscripter.com/
 * 
 * Licensed under MIT
 * 
 * Released on: October 22, 2015
 */
!function(t){var e="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;"function"==typeof define&&define.amd?define(["jquery"],function(n){e.Mob=t(e,n)}):e.Mob=t(e,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e){var n,i=t.Mob,r={};r.$=e,r.VERSION="0.2.0",r.noConflict=function(){return t.Mob=i,this};var o,s;r.Module=function(){function t(t){var e=t.factory,n=".",i=function(e){var i=e;return e.charAt(0)===n&&(i=t.id.slice(0,t.id.lastIndexOf(n))+n+e.slice(2)),o(i)};return t.exports={},delete t.factory,e(i,t.exports,t),t.exports}var e={},n=[],i={};return o=function(r){if(!e[r])throw"module "+r+" not found";if(r in i){var o=n.slice(i[r]).join("->")+"->"+r;throw"Cycle in module require graph: "+o}if(e[r].factory)try{return i[r]=n.length,n.push(r),t(e[r])}finally{delete i[r],n.pop()}return e[r].exports},s=function(t,n){if(e[t])throw"module "+t+" already defined";e[t]={id:t,factory:n}},{require:o,define:s,remove:function(t){delete e[t]},map:function(){return e}}}(),s("mob/lang",function(t,e,n){function i(t){function e(e,n,i,r,o,s){for(;o>=0&&s>o;o+=t){var a=r?r[o]:o;i=n(i,e[a],a,e)}return i}return function(n,i,r,o){i=E(i,o,4);var s=!M(n)&&$(n),a=(s||n).length,u=t>0?0:a-1;return arguments.length<3&&(r=n[s?s[u]:u],u+=t),e(n,i,r,s,u,a)}}function r(t){return function(e,n,i){n=_(n,i);for(var r=k(e),o=t>0?0:r-1;o>=0&&r>o;o+=t)if(n(e[o],o,e))return o;return-1}}function o(t,e,n){return function(i,r,o){var s=0,a=k(i);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(i,r),i[o]===r?o:-1;if(r!==r)return o=e(h.call(i,s,a),K),o>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&a>o;o+=t)if(i[o]===r)return o;return-1}}function s(t,e,n,i){var r=t,o=e?e.slice(1):null;if(a.isString(n)&&(o=String(n)),i){o=o||"";var s=ht(i);o&&s&&(o+="&"),o+=s}var u=r;return null!==o&&(u+="?"+o),u}var a={},u=Array.prototype,c=Object.prototype,l=Function.prototype,h=u.slice,f=c.toString,d=c.hasOwnProperty,p=Array.isArray,m=Object.keys,v=l.bind,g=Object.create,y=function(t){return t},b=function(t){return function(e){return null==e?void 0:e[t]}},w=function(){},E=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return null==t?y:a.isFunction(t)?E(t,e,n):G(t)?it(t):b(t)},x=function(t,e){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var r=1;i>r;r++)for(var o=arguments[r],s=t(o),a=s.length,u=0;a>u;u++){var c=s[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}},S=function(t){if(!G(t))return{};if(g)return g(t);w.prototype=t;var e=new w;return w.prototype=null,e},T=Math.pow(2,53)-1,k=b("length"),M=function(t){var e=k(t);return"number"==typeof e&&e>=0&&T>=e},C=a.each=function(t,e,n){e=E(e,n);var i,r;if(M(t))for(i=0,r=t.length;r>i;i++)e(t[i],i,t);else{var o=$(t);for(i=0,r=o.length;r>i;i++)e(t[o[i]],o[i],t)}return t},P=a.map=function(t,e,n){e=_(e,n);for(var i=!M(t)&&$(t),r=(i||t).length,o=Array(r),s=0;r>s;s++){var a=i?i[s]:s;o[s]=e(t[a],a,t)}return o};a.reduce=i(1),a.reduceRight=i(-1),a.find=function(t,e,n){var i;return i=M(t)?I(t,e,n):B(t,e,n),void 0!==i&&-1!==i?t[i]:void 0};var A=a.filter=function(t,e,n){var i=[];return e=_(e,n),C(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i},O=a.contains=function(t,e,n,i){return M(t)||(t=H(t)),("number"!=typeof n||i)&&(n=0),q(t,e,n)>=0};a.invoke=function(t,e){var n=h.call(arguments,2),i=a.isFunction(e);return P(t,function(t){var r=i?e:t[e];return null==r?r:r.apply(t,n)})};var L=a.pluck=function(t,e){return P(t,b(e))};a.sortBy=function(t,e,n){return e=_(e,n),L(P(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var N=function(t){return function(e,n,i){var r={};return n=_(n,i),C(e,function(i,o){var s=n(i,o,e);t(r,i,s)}),r}};a.groupBy=N(function(t,e,n){J(t,n)?t[n].push(e):t[n]=[e]}),a.indexBy=N(function(t,e,n){t[n]=e}),a.countBy=N(function(t,e,n){J(t,n)?t[n]++:t[n]=1}),a.toArray=function(t){return t?a.isArray(t)?h.call(t):M(t)?P(t,y):H(t):[]},a.size=function(t){return null==t?0:M(t)?t.length:$(t).length},a.rest=function(t,e,n){return h.call(t,null==e||n?1:e)};var R=a.uniq=function(t,e,n,i){Q(e)||(i=n,n=e,e=!1),null!=n&&(n=_(n,i));for(var r=[],o=[],s=0,a=k(t);a>s;s++){var u=t[s],c=n?n(u,s,t):u;e?(s&&o===c||r.push(u),o=c):n?O(o,c)||(o.push(c),r.push(u)):O(r,u)||r.push(u)}return r},D=function(t,e,n,i){for(var r=[],o=0,s=i||0,u=k(t);u>s;s++){var c=t[s];if(M(c)&&(a.isArray(c)||a.isArguments(c))){e||(c=D(c,e,n));var l=0,h=c.length;for(r.length+=h;h>l;)r[o++]=c[l++]}else n||(r[o++]=c)}return r};a.flatten=function(t,e){return D(t,e,!1)},a.union=function(){return R(D(arguments,!0,!0))},a.difference=function(t){var e=D(arguments,!0,!0,1);return A(t,function(t){return!O(e,t)})};var I=a.findIndex=r(1),j=a.findLastIndex=r(-1),F=a.sortedIndex=function(t,e,n,i){n=_(n,i,1);for(var r=n(e),o=0,s=k(t);s>o;){var a=Math.floor((o+s)/2);n(t[a])<r?o=a+1:s=a}return o},q=a.indexOf=o(1,I,F);a.lastIndexOf=o(-1,j);var $=a.keys=function(t){if(!G(t))return[];if(m)return m(t);var e=[];for(var n in t)J(t,n)&&e.push(n);return e},V=a.allKeys=function(t){if(!G(t))return[];var e=[];for(var n in t)e.push(n);return e},H=a.values=function(t){for(var e=$(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},z=a.invert=function(t){for(var e={},n=$(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},X=a.extend=x(V),Y=a.assign=x($),B=a.findKey=function(t,e,n){e=_(e,n);for(var i,r=$(t),o=0,s=r.length;s>o;o++)if(i=r[o],e(t[i],i,t))return i},U=a.pick=function(t,e,n){var i,r,o={},s=t;if(null==s)return o;a.isFunction(e)?(r=V(s),i=E(e,n)):(r=D(arguments,!1,!1,1),i=function(t,e,n){return e in n},s=Object(s));for(var u=0,c=r.length;c>u;u++){var l=r[u],h=s[l];i(h,l,s)&&(o[l]=h)}return o};a.omit=function(t,e,n){if(a.isFunction(e))e=a.negate(e);else{var i=P(D(arguments,!1,!1,1),String);e=function(t,e){return!O(i,e)}}return U(t,e,n)},a.defaults=x(V,!0),a.clone=function(t){return G(t)?a.isArray(t)?t.slice():X({},t):t};var W=a.isMatch=function(t,e){var n=$(e),i=n.length;if(null==t)return!i;for(var r=Object(t),o=0;i>o;o++){var s=n[o];if(e[s]!==r[s]||!(s in r))return!1}return!0};a.isEmpty=function(t){return null==t?!0:M(t)&&(a.isArray(t)||a.isString(t)||a.isArguments(t))?0===t.length:0===$(t).length},a.isElement=function(t){return!(!t||1!==t.nodeType)},a.isArray=p||function(t){return"[object Array]"===f.call(t)};var G=a.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t};C(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){a["is"+t]=function(e){return f.call(e)==="[object "+t+"]"}}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(a.isFunction=function(t){return"function"==typeof t||!1});var K=a.isNaN=function(t){return a.isNumber(t)&&t!==+t},Q=a.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===f.call(t)};a.isNull=function(t){return null===t},a.isUndefined=function(t){return void 0===t};var Z=a.isWindow=function(t){return null!=t&&t==t.window};a.isPlainObject=function(t){return G(t)&&!Z(t)&&Object.getPrototypeOf(t)==Object.prototype},a.isDocument=function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE};var J=a.has=function(t,e){return null!=t&&d.call(t,e)};a.inherits=function(t,e){var n,i=this;n=t&&J(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},X(n,i,e);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,t&&X(n.prototype,t),n.__super__=i.prototype,n};var tt=function(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var o=S(t.prototype),s=t.apply(o,r);return G(s)?s:o},et=a.bind=function(t,e){if(v&&t.bind===v)return v.apply(t,h.call(arguments,1));if(!a.isFunction(t))throw new TypeError("Bind must be called on a function");var n=h.call(arguments,2),i=function(){return tt(t,i,e,this,n.concat(h.call(arguments)))};return i},nt=a.partial=function(t){var e=h.call(arguments,1),n=function(){for(var i=0,r=e.length,o=Array(r),s=0;r>s;s++)o[s]=e[s]===a?arguments[i++]:e[s];for(;i<arguments.length;)o.push(arguments[i++]);return tt(t,n,this,this,o)};return n};a.bindAll=function(t){var e,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(e=1;i>e;e++)n=arguments[e],t[n]=et(t[n],t);return t},a.delay=function(t,e){var n=h.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},a.throttle=function(t,e,n){var i,r,o,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:rt(),s=null,o=t.apply(i,r),s||(i=r=null)};return function(){var c=rt();a||n.leading!==!1||(a=c);var l=e-(c-a);return i=this,r=arguments,0>=l||l>e?(s&&(clearTimeout(s),s=null),a=c,o=t.apply(i,r),s||(i=r=null)):s||n.trailing===!1||(s=setTimeout(u,l)),o}},a.debounce=function(t,e,n){var i,r,o,s,a,u=function(){var c=rt()-s;e>c&&c>=0?i=setTimeout(u,e-c):(i=null,n||(a=t.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,s=rt();var c=n&&!i;return i||(i=setTimeout(u,e)),c&&(a=t.apply(o,r),o=r=null),a}},a.negate=function(t){return function(){return!t.apply(this,arguments)}},a.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},a.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},a.once=nt(a.before,2),a.noop=function(){};var it=a.matcher=function(t){return t=Y({},t),function(e){return W(e,t)}},rt=a.now=Date.now||function(){return(new Date).getTime()},ot={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},st=z(ot),at=function(t){var e=function(e){return t[e]},n="(?:"+$(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};a.escape=at(ot),a.unescape=at(st),a.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),a.isFunction(i)?i.call(t):i};var ut=0;a.uniqueId=function(t){var e=++ut+"";return t?t+e:e},a.getParameterByName=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),n=e.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},a.camelize=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})};var ct=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,16)}}(),lt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelRequestAnimationFrame;a.requestAnimationFrame=function(t){return ct(t)},a.cancelAnimationFrame=function(t){lt(t)},a.adjustTitle=function(t){a.requestAnimationFrame(function(){document.title=t})};var ht=a.encodeUrlParams=function(t){var e=[],n=function(t){return encodeURIComponent(t).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")};return C(t,function(t,i){e.length&&e.push("&"),e.push(n(i),"=",n(t))}),e.join("").replace(/%20/g,"+")};a.constructUrl=function(t,e,n){var i=/^(.*?)(\?.*)?$/.exec(t);return s(i[1],i[2],e,n)},n.exports=a}),s("mob/logger",function(t,e,n){function i(t,e){e.name&&t.unshift("["+e.name+"]")}var r,o=t("mob/lang"),s={},a={},u=function(t,e){return{value:t,name:e}};s.DEBUG=u(1,"DEBUG"),s.INFO=u(2,"INFO"),s.TIME=u(3,"TIME"),s.WARN=u(4,"WARN"),s.ERROR=u(5,"ERROR"),s.OFF=u(6,"OFF");var c=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};c.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},debug:function(){this.invoke(s.DEBUG,arguments)},info:function(){this.invoke(s.INFO,arguments)},warn:function(){this.invoke(s.WARN,arguments)},error:function(){this.invoke(s.ERROR,arguments)},time:function(t){o.isString(t)&&t.length>0&&this.invoke(s.TIME,[t,"start"])},timeEnd:function(t){o.isString(t)&&t.length>0&&this.invoke(s.TIME,[t,"end"])},invoke:function(t,e){r&&this.enabledFor(t)&&r(e,o.extend({level:t},this.context))}};var l=new c({filterLevel:s.OFF});o.each(["enabledFor","debug","time","timeEnd","info","warn","error"],function(t){s[t]=o.bind(l[t],l)}),s.log=s.info,s.setHandler=function(t){r=t},s.setLevel=function(t){l.setLevel(t);for(var e in a)a.hasOwnProperty(e)&&a[e].setLevel(t)},s.get=function(t){return a[t]||(a[t]=new c(o.extend({name:t},l.context)))},s.useDefaults=function(t){t=t||{},t.formatter=t.formatter||i,o.isUndefined(console)||(s.setLevel(t.defaultLevel||s.DEBUG),s.setHandler(function(e,n){e=Array.prototype.slice.call(e);var i,r=console.log;n.level===s.TIME?(i=(n.name?"["+n.name+"] ":"")+e[0],"start"===e[1]?console.time&&console.time(i):console.timeEnd&&console.timeEnd(i)):(n.level===s.WARN?r=console.warn:n.level===s.ERROR?r=console.error:n.level===s.INFO&&(r=console.info),t.formatter(e,n),r.apply(console,e))}))},n.exports=s}),s("mob/error",function(t,e,n){var i=t("mob/lang"),o=i.inherits,s=i.pick,a=["description","fileName","lineNumber","name","message","number"],u=o.call(Error,{urlRoot:"http://xscripter.com/mobjs/docs/v"+r.VERSION+"/",constructor:function(t,e){i.isObject(t)?(e=t,t=e.message):e||(e={});var n=Error.call(this,t);i.extend(this,s(n,a),s(e,a)),this.captureStackTrace(),e.url&&(this.url=this.urlRoot+e.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,u)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}});u.extend=o,n.exports=u}),s("mob/jqlite",function(t,e,n){function i(t){return t=j(t),!(!t.width()&&!t.height())&&"none"!==t.css("display")}function r(t){return J.call(t,function(e,n){return t.indexOf(e)==n})}function o(t){return"number"==typeof t.length}function s(t){return J.call(t,function(t){return null!=t})}function a(t){return t.length>0?j.fn.concat.apply([],t):t}function u(t,e){t=t.replace(/=#\]/g,'="#"]');var n,i,r=it.exec(t);if(r&&r[2]in F&&(n=F[r[2]],i=r[3],t=r[1],i)){var o=Number(i);i=isNaN(o)?i.replace(/^["']|["']$/g,""):o}return e(t,n,i)}function c(t,e){if(!e||!t||1!==t.nodeType)return!1;var n,i=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector,r=t.parentNode,o=!r;return i?i.call(t,e):(o&&(r=ft).appendChild(t),n=~K.qsa(r,e).indexOf(t),o&&ft.removeChild(t),n)}function l(t,e){var n,i="#"==e[0],r=!i&&"."==e[0],o=i||r?e.slice(1):e,s=ht.test(o);return G(t)&&s&&i?(n=t.getElementById(o))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:Z.call(s&&!i?r?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))}function h(t,e){var n="data-"+t.replace(vt,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,e):this.attr(n);return null!==i?R(i):I}function f(t,e){var n=t[_t],i=n&&Et[n];if(H(e))return i||d(t);if(i){if(e in i)return i[e];var r=z(e);if(r in i)return i[r]}return h.call(j(t),e)}function d(t,e,n){var i=t[_t]||(t[_t]=++wt),r=Et[i]||(Et[i]=p(t));return H(e)||(r[z(e)]=n),r}function p(t){var e={};return j.each(t.attributes||[],function(t,n){0==n.name.indexOf("data-")&&(e[z(n.name.replace("data-",""))]=R(n.value))}),e}function m(t){return t.evtId||(t.evtId=xt++)}function v(t,e,n,i){if(e=g(e),e.ns)var r=y(e.ns);return(St[m(t)]||[]).filter(function(t){return!(!t||e.e&&t.e!=e.e||e.ns&&!r.test(t.ns)||n&&m(t.fn)!==m(n)||i&&t.sel!=i)})}function g(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function y(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function b(t,e){return t.del&&!kt&&t.e in Mt||!!e}function w(t){return Ct[t]||kt&&Mt[t]||t}function E(t,e,n,i,r,o,s){var a=m(t),u=St[a]||(St[a]=[]);e.split(/\s/).forEach(function(e){if("ready"==e)return j(tt).ready(n);var a=g(e);a.fn=n,a.sel=r,a.e in Ct&&(n=function(t){var e=t.relatedTarget;return!e||e!==this&&!j.contains(this,e)?a.fn.apply(this,arguments):void 0}),a.del=o;var c=o||n;a.proxy=function(e){if(e=x(e),!e.isImmediatePropagationStopped()){e.data=i;var n=c.apply(t,H(e._args)?[e]:[e].concat(e._args));return n===!1&&(e.preventDefault(),e.stopPropagation()),n}},a.i=u.length,u.push(a),"addEventListener"in t&&t.addEventListener(w(a.e),a.proxy,b(a,s))})}function _(t,e,n,i,r){var o=m(t);(e||"").split(/\s/).forEach(function(e){v(t,e,n,i).forEach(function(e){delete St[o][e.i],"removeEventListener"in t&&t.removeEventListener(w(e.e),e.proxy,b(e,r))})})}function x(t,e){return(e||!t.isDefaultPrevented)&&(e||(e=t),j.each(Lt,function(n,i){var r=e[n];t[n]=function(){return this[i]=Pt,r&&r.apply(e,arguments)},t[i]=At}),(H(e.defaultPrevented)?"returnValue"in e?e.returnValue===!1:e.getPreventDefault&&e.getPreventDefault():e.defaultPrevented)&&(t.isDefaultPrevented=Pt)),t}function S(t){var e,n={originalEvent:t};for(e in t)Ot.test(e)||H(t[e])||(n[e]=t[e]);return x(n,t)}function T(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function k(t){return t in pt?pt[t]:pt[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function M(t,e){return"number"!=typeof e||mt[T(t)]?e:e+"px"}function C(t){var e,n;return dt[t]||(e=tt.createElement(t),tt.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),dt[t]=n),dt[t]}function P(t){return"children"in t?Z.call(t.children):j.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function A(t,e){return null==e?j(t):j(t).filter(e)}function O(t,e,n,i){return X(e)?e.call(t,n,i):e}function L(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function N(t,e){var n=t.className||"",i=n&&!H(n.baseVal);return H(e)?i?n.baseVal:n:void(i?n.baseVal=e:t.className=e)}function R(t){try{return t?"true"==t||("false"==t?!1:"null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?JSON.parse(t):t):t}catch(e){return t}}function D(t,e){e(t);for(var n=0,i=t.childNodes.length;i>n;n++)D(t.childNodes[n],e)}var I,j,F,q,$=t("mob/lang"),V=t("mob/logger"),H=$.isUndefined,z=$.camelize,X=$.isFunction,Y=$.isString,B=$.isPlainObject,U=$.isObject,W=$.isArray,G=$.isDocument,K={},Q=Array.prototype,Z=Q.slice,J=Q.filter,tt=window.document,et=/^\s*<(\w+|!)[^>]*>/,nt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,it=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),rt=/^\s*>/,ot="JQLite"+ +new Date,st=["val","css","html","text","data","width","height","offset"],at=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ut=tt.createElement("table"),ct=tt.createElement("tr"),lt={tr:tt.createElement("tbody"),tbody:ut,thead:ut,tfoot:ut,td:ct,th:ct,"*":tt.createElement("div")},ht=/^[\w-]*$/,ft=tt.createElement("div"),dt={},pt={},mt={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},vt=/([A-Z])/g,gt=/complete|loaded|interactive/,yt=/^(?:body|html)$/i,bt={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},wt=0,Et={},_t="JQLite"+$.now(),xt=1,St={},Tt={click:"MouseEvents",mousedown:"MouseEvents",mouseup:"MouseEvents",mousemove:"MouseEvents"},kt="onfocusin"in window,Mt={focus:"focusin",blur:"focusout"},Ct={mouseenter:"mouseover",mouseleave:"mouseout"},Pt=function(){return!0},At=function(){return!1},Ot=/^([A-Z]|returnValue$|layer[XY]$)/,Lt={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};j=function(t,e){return K.init(t,e)},j.expr=[],F=j.expr[":"]={visible:function(){return i(this)?this:void 0},hidden:function(){return i(this)?void 0:this},selected:function(){return this.selected?this:void 0},checked:function(){return this.checked?this:void 0},parent:function(){return this.parentNode},first:function(t){return 0===t?this:void 0},last:function(t,e){return t===e.length-1?this:void 0},eq:function(t,e,n){return t===n?this:void 0},contains:function(t,e,n){return j(this).text().indexOf(n)>-1?this:void 0},has:function(t,e,n){return K.qsa(this,n).length?this:void 0}},j.contains=tt.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},j.map=function(t,e){var n,i,r,s=[];if(o(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&s.push(n);else for(r in t)n=e(t[r],r),null!=n&&s.push(n);return a(s)},j.each=function(t,e){var n,i;if(o(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},j.proxy=function(t,e){var n=2 in arguments&&Z.call(arguments,2);if(X(t)){var i=function(){return t.apply(e,n?n.concat(Z.call(arguments)):arguments)};return i.evtId=m(t),i}if(Y(e))return n?(n.unshift(t[e],t),j.proxy.apply(null,n)):j.proxy(t[e],t);throw new TypeError("expected function")},j.event={add:E,remove:_},j.Event=function(t,e){Y(t)||(e=t,t=e.type);var n=tt.createEvent(Tt[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),x(n)},K.jQ=function(t,e){return t=t||[],t.__proto__=j.fn,t.selector=e||"",t},K.isJQ=function(t){return t instanceof K.jQ},K.qsa=function(t,e){return u(e,function(n,i,o){try{var s;!n&&i?n="*":rt.test(n)&&(s=j(t).addClass(ot),n="."+ot+" "+n);var a=l(t,n)}catch(u){throw V.error("error performing selector: %o",e),u}finally{s&&s.removeClass(ot)}return i?r(j.map(a,function(t,e){return i.call(t,e,a,o)})):a})},K.matches=function(t,e){return u(e,function(e,n,i){return!(e&&!c(t,e)||n&&n.call(t,null,i)!==t)})},K.fragment=function(t,e,n){var i,r,o;return nt.test(t)&&(i=j(tt.createElement(RegExp.$1))),i||(t.replace&&(t=t.replace(at,"<$1></$2>")),H(e)&&(e=et.test(t)&&RegExp.$1),e in lt||(e="*"),o=lt[e],o.innerHTML=""+t,i=j.each(Z.call(o.childNodes),function(){o.removeChild(this)})),B(n)&&(r=j(i),j.each(n,function(t,e){st.indexOf(t)>-1?r[t](e):r.attr(t,e)})),i},K.init=function(t,e){var n;if(!t)return K.jQ();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&et.test(t))n=K.fragment(t,RegExp.$1,e),t=null;else{if(!H(e))return j(e).find(t);n=K.qsa(tt,t)}else{if(X(t))return j(tt).ready(t);if(K.isJQ(t))return t;if(W(t))n=s(t);else if(U(t))n=[t],t=null;else if(et.test(t))n=K.fragment(t.trim(),RegExp.$1,e),t=null;else{if(!H(e))return j(e).find(t);n=K.qsa(tt,t)}}return K.jQ(n,t)},j.fn={forEach:Q.forEach,indexOf:Q.indexOf,concat:Q.concat,map:function(t){return j(j.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return j(Z.apply(this,arguments))},each:function(t){return Q.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},ready:function(t){return gt.test(tt.readyState)&&tt.body?t(j):tt.addEventListener("DOMContentLoaded",function(){t(j)},!1),this},get:function(t){return H(t)?Z.call(this):this[t>=0?t:t+this.length]},size:function(){return this.length},remove:function(){var t=this.find("*");return t=t.add(this),t.removeData(),this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},filter:function(t){return X(t)?this.not(this.not(t)):j(J.call(this,function(e){return K.matches(e,t)}))},add:function(t,e){return j(r(this.concat(j(t,e))))},not:function(t){var e=[];if(X(t)&&!H(t.call))this.each(function(n){t.call(this,n)||e.push(this)});else{var n="string"==typeof t?this.filter(t):o(t)&&X(t.item)?Z.call(t):j(t);this.forEach(function(t){n.indexOf(t)<0&&e.push(t)})}return j(e)},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!U(t)?t:j(t)},find:function(t){var e,n=this;return e=t?"object"==typeof t?j(t).filter(function(){var t=this;return Q.some.call(n,function(e){return j.contains(e,t)})}):1==this.length?j(K.qsa(this[0],t)):this.map(function(){return K.qsa(this,t)}):j()},closest:function(t,e){var n=this[0],i=!1;for("object"==typeof t&&(i=j(t));n&&!(i?i.indexOf(n)>=0:K.matches(n,t));)n=n!==e&&!G(n)&&n.parentNode;return j(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=j.map(n,function(t){return(t=t.parentNode)&&!G(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return A(e,t)},parent:function(t){return A(r(this.pluck("parentNode")),t)},children:function(t){return A(this.map(function(){return P(this)}),t)},contents:function(){return this.map(function(){return Z.call(this.childNodes)})},siblings:function(t){return A(this.map(function(t,e){return J.call(P(e.parentNode),function(t){return t!==e})}),t)},empty:function(){var t=this.find("*");return t.removeData(),this.each(function(){this.innerHTML=""})},pluck:function(t){return j.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=C(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=X(t);if(this[0]&&!e)var n=j(t).get(0),i=n.parentNode||this.length>1;return this.each(function(r){j(this).wrapAll(e?t.call(this,r):i?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){j(this[0]).before(t=j(t));for(var e;(e=t.children()).length;)t=e.first();j(t).append(this)}return this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=j(this);(H(t)?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return j(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return j(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;j(this).empty().append(O(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=O(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(t,e){var n,i;return"string"!=typeof t||1 in arguments?this.each(function(n){if(1===this.nodeType)if(U(t))for(i in t)L(this,i,t[i]);else L(this,t,O(this,e,n,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:I},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){L(this,t)},this)})},prop:function(t,e){return t=bt[t]||t,1 in arguments?this.each(function(n){this[t]=O(this,e,n,this[t])}):this[0]&&this[0][t]},val:function(t){return 0 in arguments?this.each(function(e){this.value=O(this,t,e,this.value)}):this[0]&&(this[0].multiple?j(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=j(this),i=O(this,t,e,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,e){if(arguments.length<2){var n,i=this[0];if(!i)return;if(n=getComputedStyle(i,""),"string"==typeof t)return i.style[z(t)]||n.getPropertyValue(t);if(W(t)){var r={};return j.each(t,function(t,e){r[e]=i.style[z(e)]||n.getPropertyValue(e)}),r}}var o,s="";if(Y(t))e||0===e?s=T(t)+":"+M(t,e):this.each(function(){this.style.removeProperty(T(t))});else for(o in t)t[o]||0===t[o]?s+=T(o)+":"+M(o,t[o])+";":this.each(function(){this.style.removeProperty(T(o))});return this.each(function(){this.style.cssText+=";"+s})},hasClass:function(t){return t?Q.some.call(this,function(t){return this.test(N(t))},k(t)):!1},addClass:function(t){return t?this.each(function(e){if("className"in this){q=[];var n=N(this),i=O(this,t,e,n);i.split(/\s+/g).forEach(function(t){j(this).hasClass(t)||q.push(t)},this),q.length&&N(this,n+(n?" ":"")+q.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(H(t))return N(this,"");q=N(this),O(this,t,e,q).split(/\s+/g).forEach(function(t){q=q.replace(k(t)," ")}),N(this,q.trim())}})},toggleClass:function(t,e){return t?this.each(function(n){var i=j(this),r=O(this,t,n,N(this));r.split(/\s+/g).forEach(function(t){(H(e)?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})}):this},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||tt.body;t&&!yt.test(t.nodeName)&&"static"==j(t).css("position");)t=t.offsetParent;return t})},data:function(t,e){return H(e)?B(t)?this.each(function(e,n){j.each(t,function(t,e){d(n,t,e)})}):0 in this?f(this[0],t):I:this.each(function(){d(this,t,e)})},removeData:function(t){return"string"==typeof t&&(t=t.split(/\s+/)),this.each(function(){var e=this[_t],n=e&&Et[e];n&&j.each(t||n,function(e){delete n[t?z(this):e]})})},on:function(t,e,n,i,r){var o,s,a=this;return t&&!Y(t)?(j.each(t,function(t,i){a.on(t,e,n,i,r)}),a):(Y(e)||X(i)||i===!1||(i=n,n=e,e=I),(X(n)||n===!1)&&(i=n,n=I),i===!1&&(i=At),a.each(function(a,u){r&&(o=function(t){return _(u,t.type,i),i.apply(this,arguments)}),e&&(s=function(t){var n,r=j(t.target).closest(e,u).get(0);return r&&r!==u?(n=$.extend(S(t),{currentTarget:r,liveFired:u}),(o||i).apply(r,[n].concat(Z.call(arguments,1)))):void 0}),E(u,t,i,n,e,s||o)}))},off:function(t,e,n){var i=this;return t&&!Y(t)?(j.each(t,function(t,n){i.off(t,e,n)}),i):(Y(e)||X(n)||n===!1||(n=e,e=I),n===!1&&(n=At),i.each(function(){_(this,t,n,e)}))},bind:function(t,e,n){return this.on(t,e,n)},unbind:function(t,e){return this.off(t,e)},one:function(t,e,n,i){return this.on(t,e,n,i,1)},trigger:function(t,e){return t=Y(t)||B(t)?j.Event(t):x(t),t._args=e,this.each(function(){t.type in Mt&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):j(this).triggerHandler(t,e)})},triggerHandler:function(t,e){var n,i;return this.each(function(r,o){n=S(Y(t)?j.Event(t):t),n._args=e,n.target=o,j.each(v(o,t.type||t),function(t,e){return i=e.proxy(n),n.isImmediatePropagationStopped()?!1:void 0})}),i}},j.fn.detach=j.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});j.fn[t]=function(n){var i,r=this[0];return H(n)?$.isWindow(r)?r["inner"+e]:G(r)?r.documentElement["scroll"+e]:(i=this.offset())&&i[t]:this.each(function(e){r=j(this),r.css(t,O(this,n,e,r[t]()))})}}),["after","prepend","before","append"].forEach(function(t,e){var n=e%2;j.fn[t]=function(){var t,i=j.map(arguments,function(t){return U(t)||W(t)||null==t?t:K.fragment(t)}),r=this.length>1;return i.length<1?this:this.each(function(o,s){t=n?s:s.parentNode,s=0==e?s.nextSibling:1==e?s.firstChild:2==e?s:null;var a=j.contains(tt.documentElement,t);i.forEach(function(e){if(r)e=e.cloneNode(!0);else if(!t)return j(e).remove();t.insertBefore(e,s),a&&D(e,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},j.fn[n?t+"To":"insert"+(e?"Before":"After")]=function(e){return j(e)[t](this),this}}),K.jQ.prototype=j.fn,j.jqlite=K,n.exports=j}),s("mob/base",function(t,e,n){function i(t,e,n,i){var r=i.split(/\s+/);h(r,function(i){var r=t[i];if(!r)throw new l('Method "'+i+'" was configured as an event handler, but does not exist.');t.listenTo(e,n,r)})}function r(t,e,n,i){t.listenTo(e,n,i)}function o(t,e,n,i){var r=i.split(/\s+/);h(r,function(i){var r=t[i];t.stopListening(e,n,r)})}function s(t,e,n,i){t.stopListening(e,n,i)}function a(t,e,n,i,r){if(e&&n){if(!u.isObject(n))throw new l("Bindings must be an object or function.");n=b(n,t),h(n,function(n,o){f(n)?i(t,e,o,n):r(t,e,o,n)})}}var u=t("mob/lang"),c=t("mob/jqlite"),l=t("mob/error"),h=u.each,f=u.isFunction,d=u.rest,p=e.isNodeAttached=function(t){return c.contains(document.documentElement,t)},m=e._triggerMethod=function(){function t(t,e,n){return n.toUpperCase()}var e=/(^|:)(\w)/gi;return function(n,i,r){var o=arguments.length<3;o&&(r=i,i=r[0]);var s,a="on"+i.replace(e,t),u=n[a];

return f(u)&&(s=u.apply(n,o?d(r):r)),f(n.trigger)&&(o+r.length>1?n.trigger.apply(n,o?r:[i].concat(d(r,0))):n.trigger(i)),s}}(),v=e.triggerMethod=function(t){return m(this,arguments)},g=e.triggerMethodOn=function(t){var e=f(t.triggerMethod)?t.triggerMethod:v;return e.apply(t,d(arguments))};e.mergeOptions=function(t,e){t&&u.extend(this,u.pick(t,e))};var y=e.getOption=function(t,e){return t&&e?t.options&&!u.isUndefined(t.options[e])?t.options[e]:t[e]:void 0};e.proxyGetOption=function(t){return y(this,t)};var b=e._getValue=function(t,e,n){return f(t)&&(t=n?t.apply(e,n):t.call(e)),t};e.getValue=function(t,e){return t&&t[e]?f(t[e])?t[e]():t[e]:null};var w=e.bindEntityEvents=function(t,e,n){a(t,e,n,r,i)},E=e.unbindEntityEvents=function(t,e,n){a(t,e,n,s,o)};e.proxyBindEntityEvents=function(t,e){return w(this,t,e)},e.proxyUnbindEntityEvents=function(t,e){return E(this,t,e)},e.monitorDOMRefresh=function(t){function e(){t._isShown=!0,i()}function n(){t._isRendered=!0,i()}function i(){t._isShown&&t._isRendered&&p(t.el)&&g(t,"dom:refresh",t)}t._isDomRefreshMonitored||(t._isDomRefreshMonitored=!0,t.on({show:e,render:n}))}}),s("mob/class",function(t,e,n){var i=t("mob/lang"),r=t("mob/base"),o=t("mob/events"),s=i.extend,a=function(t){this.options=s({},i.result(this,"options"),t),this.initialize.apply(this,arguments)};a.extend=i.inherits,s(a.prototype,o,{initialize:function(){},destroy:function(){return this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening(),this},triggerMethod:r.triggerMethod,mergeOptions:r.mergeOptions,getOption:r.proxyGetOption,bindEntityEvents:r.proxyBindEntityEvents,unbindEntityEvents:r.proxyUnbindEntityEvents}),n.exports=a}),s("mob/events",function(t,e,n){var i=t("mob/lang"),r=i.keys,o=i.uniqueId,s=i.bind,a=function(t,e,n,i,o){var s,u=0,c=/\s+/;if(n&&"object"==typeof n){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(s=r(n);u<s.length;u++)e=a(t,e,s[u],n[s[u]],o)}else if(n&&c.test(n))for(s=n.split(c);u<s.length;u++)e=t(e,s[u],i,o);else e=t(e,n,i,o);return e},u=function(t,e,n,i,r){if(t._events=a(c,t._events||{},e,n,{context:i,ctx:t,listening:r}),r){var o=t._listeners||(t._listeners={});o[r.id]=r}return t},c=function(t,e,n,i){if(n){var r=t[e]||(t[e]=[]),o=i.context,s=i.ctx,a=i.listening;a&&a.count++,r.push({callback:n,context:o,ctx:o||s,listening:a})}return t},l=function(t,e,n,o){if(t){var s,a=0,u=o.context,c=o.listeners;if(e||n||u){for(var l=e?[e]:r(t);a<l.length;a++){e=l[a];var h=t[e];if(!h)break;for(var f=[],d=0;d<h.length;d++){var p=h[d];n&&n!==p.callback&&n!==p.callback._callback||u&&u!==p.context?f.push(p):(s=p.listening,s&&0===--s.count&&(delete c[s.id],delete s.listeningTo[s.objId]))}f.length?t[e]=f:delete t[e]}return i.size(t)?t:void 0}for(var m=r(c);a<m.length;a++)s=c[m[a]],delete c[s.id],delete s.listeningTo[s.objId]}},h=function(t,e,n,r){if(n){var o=t[e]=i.once(function(){r(e,o),n.apply(this,arguments)});o._callback=n}return t},f=function(t,e,n,i){if(t){var r=t[e],o=t.all;r&&o&&(o=o.slice()),r&&d(r,i),o&&d(o,[e].concat(i))}return t},d=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}},p={on:function(t,e,n){return u(this,t,e,n)},listenTo:function(t,e,n){if(!t)return this;var i=t._listenId||(t._listenId=o("l")),r=this._listeningTo||(this._listeningTo={}),s=r[i];if(!s){var a=this._listenId||(this._listenId=o("l"));s=r[i]={obj:t,objId:i,id:a,listeningTo:r,count:0}}return u(t,e,n,this,s),this},off:function(t,e,n){return this._events?(this._events=a(l,this._events,t,e,{context:n,listeners:this._listeners}),this):this},stopListening:function(t,e,n){var o=this._listeningTo;if(!o)return this;for(var s=t?[t._listenId]:r(o),a=0;a<s.length;a++){var u=o[s[a]];if(!u)break;u.obj.off(e,n,this)}return i.isEmpty(o)&&(this._listeningTo=void 0),this},once:function(t,e,n){var i=a(h,{},t,e,s(this.off,this));return this.on(i,void 0,n)},listenToOnce:function(t,e,n){var i=a(h,{},e,n,s(this.stopListening,this,t));return this.listenTo(t,i)},trigger:function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;e>i;i++)n[i]=arguments[i+1];return a(f,this._events,t,void 0,n),this}};n.exports=p}),s("mob/http",function(t,e,n){var i=t("mob/lang"),r=t("mob/error"),o=i.isFunction,s=i.toArray,a=function(t,e){var n=500,o=function(t,e){return t.length>e?t.slice(0,e)+"...":t},s=i.isString(e)?e:e.toString(),a="failed ["+t+"]";return s&&(a+=" "+o(s.replace(/\n/g," "),n)),new r(a)},u=function(t){var e=(t.headers["content-type"]||";").split(";")[0];if(i.contains(["application/json","text/javascript","application/javascript","application/x-javascript"],e))try{t.data=JSON.parse(t.content)}catch(n){t.data=null}else t.data=null},c={};c.request=function(t,e,n,s){if(!s&&o(n)&&(s=n,n=null),n=n||{},!o(s))throw new r("Can not make a blocking HTTP call from the client; callback required.");t=(t||"").toUpperCase();var c={},l=n.content;n.data&&(l=JSON.stringify(n.data),c["Content-Type"]="application/json");var h,f;l||"GET"===t||"HEAD"===t?h=n.params:f=n.params,e=i.constructUrl(e,n.query,h);var d,p,m=n.auth;if(m){var v=m.indexOf(":");if(0>v)throw new r('auth option should be of the form "username:password"');d=m.substring(0,v),p=m.substring(v+1)}f&&(l=i.encodeUrlParams(f)),i.extend(c,n.headers||{}),s=function(t){return function(e,n){e&&n&&(e.response=n),t(e,n)}}(s),s=i.once(s);try{var g=new XMLHttpRequest;g.open(t,e,!0,d,p);for(var y in c)g.setRequestHeader(y,c[y]);var b,w=!1;if(n.timeout&&(b=setTimeout(function(){w=!0,g.abort()},n.timeout)),g.onreadystatechange=function(t){if(4===g.readyState)if(b&&clearTimeout(b),w)s(new r("timeout"));else if(g.status){var e={};e.statusCode=g.status,e.content=g.responseText,e.headers={};var n=g.getAllResponseHeaders();""===n&&g.getResponseHeader("content-type")&&(n="content-type: "+g.getResponseHeader("content-type"));var o=n.split(/\r?\n/);i.each(o,function(t){var n=/^(.*?):(?:\s+)(.*)$/.exec(t);n&&3===n.length&&(e.headers[n[1].toLowerCase()]=n[2])}),u(e);var c=null;e.statusCode>=400&&(c=a(e.statusCode,e.content)),s(c,e)}else s(new r("network"))},n.beforeSend){var E=i.once(n.beforeSend);if(!1===E.call(null,g,n))return g.abort()}g.send(l)}catch(_){s(_)}},c.get=function(){return c.request.apply(this,["GET"].concat(s(arguments)))},c.post=function(){return c.request.apply(this,["POST"].concat(s(arguments)))},c.put=function(){return c.request.apply(this,["PUT"].concat(s(arguments)))},c.del=function(){return c.request.apply(this,["DELETE"].concat(s(arguments)))},n.exports=c}),s("mob/storage",function(t,e,n){var i=t("mob/lang"),r=i.extend,o=i.indexOf,s=i.isFunction,a=i.isUndefined,u=function(t){this.options=t||{},this.name=this.options.name||"store",this.type=this.options.type||"memory",this.meta_key=this.options.meta_key||"__keys__",this.storage=new u[u.stores[this.type]](this.name,this.options)};u.stores={memory:"Memory",local:"LocalStorage",session:"SessionStorage",cookie:"Cookie"},r(u.prototype,{isAvailable:function(){return s(this.storage.isAvailable)?this.storage.isAvailable():!0},exists:function(t){return this.storage.exists(t)},set:function(t,e){var n=i.isString(e)?e:JSON.stringify(e);return t=t.toString(),this.storage.set(t,n),t!=this.meta_key&&this._addKey(t),e},get:function(t){var e=this.storage.get(t);try{return JSON.parse(e)}catch(n){return e}},clear:function(t){return this._removeKey(t),this.storage.clear(t)},clearAll:function(){var t=this;this.each(function(e,n){t.clear(e)})},keys:function(){return this.get(this.meta_key)||[]},each:function(t){var e,n=0,i=this.keys();for(n;n<i.length;n++)if(e=t(i[n],this.get(i[n])),e===!1)return!1},fetch:function(t,e){return this.exists(t)?this.get(t):this.set(t,e.apply(this))},_addKey:function(t){var e=this.keys();-1===o(e,t)&&e.push(t),this.set(this.meta_key,e)},_removeKey:function(t){var e=this.keys(),n=o(e,t);-1!==n&&e.splice(n,1),this.set(this.meta_key,e)}}),u.isAvailable=function(t){try{return u[u.stores[t]].prototype.isAvailable()}catch(e){return!1}},u.Cookie=function(t,e){this.name=t,this.options=e||{},this.path=this.options.path||"/",this.expires_in=this.options.expires_in||1209600},r(u.Cookie.prototype,{isAvailable:function(){return"cookie"in document&&"file:"!=window.location.protocol},exists:function(t){return null!=this.get(t)},set:function(t,e){return this._setCookie(t,e)},get:function(t){return this._getCookie(t)},clear:function(t){this._setCookie(t,"",-1)},_key:function(t){return["store",this.name,t].join(".")},_getCookie:function(t){var e=this._key(t).replace(/(\.|\*|\(|\)|\[|\])/g,"\\$1"),n=document.cookie.match("(^|;\\s)"+e+"=([^;]*)(;|$)");return n?n[2]:null},_setCookie:function(t,e,n){n||(n=1e3*this.expires_in);var i=new Date;i.setTime(i.getTime()+n),document.cookie=[this._key(t),"=",e,"; expires=",i.toGMTString(),"; path=",this.path].join("")}}),u.LocalStorage=function(t){this.name=t},r(u.LocalStorage.prototype,{isAvailable:function(){return"localStorage"in window&&"file:"!=window.location.protocol},exists:function(t){return null!=this.get(t)},set:function(t,e){return window.localStorage.setItem(this._key(t),e)},get:function(t){return window.localStorage.getItem(this._key(t))},clear:function(t){window.localStorage.removeItem(this._key(t))},_key:function(t){return["store",this.name,t].join(".")}}),u.Memory=function(t){this.name=t,u.Memory.store=u.Memory.store||{},u.Memory.store[this.name]=u.Memory.store[this.name]||{},this.store=u.Memory.store[this.name]},r(u.Memory.prototype,{isAvailable:function(){return!0},exists:function(t){return!a(this.store[t])},set:function(t,e){return this.store[t]=e},get:function(t){return this.store[t]},clear:function(t){delete this.store[t]}}),u.SessionStorage=function(t){this.name=t},r(u.SessionStorage.prototype,{isAvailable:function(){return"sessionStorage"in window&&"file:"!=window.location.protocol&&s(window.sessionStorage.setItem)},exists:function(t){return null!=this.get(t)},set:function(t,e){return window.sessionStorage.setItem(this._key(t),e)},get:function(t){var e=window.sessionStorage.getItem(this._key(t));return e&&!a(e.value)&&(e=e.value),e},clear:function(t){window.sessionStorage.removeItem(this._key(t))},_key:function(t){return["store",this.name,t].join(".")}}),n.exports=u}),s("mob/support",function(t,e,i){var r=document.createElement("div").style,o=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],n=0,i=e.length;i>n;n++)if(t=e[n]+"ransform",t in r)return e[n].substr(0,e[n].length-1);return!1}(),s=function(t){return o===!1?!1:""===o?t:o+t.charAt(0).toUpperCase()+t.substr(1)},a={getPrefixStyle:s,addEventListener:!!window.addEventListener,transitions:function(t){var e=["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"];for(var i in e)if(t.style[e[i]]!==n)return!0;return!1}(document.createElement("swipe")),touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transform3d:function(){var t,e,n,i,r;return t=document.getElementsByTagName("head")[0],e=document.body,n=document.createElement("style"),n.textContent="@media (transform-3d),(-o-transform-3d),(-moz-transform-3d),(-webkit-transform-3d){#mo-3dtest{height:3px}}",i=document.createElement("div"),i.id="mo-3dtest",t.appendChild(n),e.appendChild(i),r=3===i.offsetHeight,n.parentNode.removeChild(n),i.parentNode.removeChild(i),r},animationEvents:"undefined"!=typeof window.WebKitAnimationEvent,hasTransform:s("transform")!==!1,hasPerspective:s("perspective")in r,hasTouch:"ontouchstart"in window,hasPointer:window.PointerEvent||window.MSPointerEvent,hasTransition:s("transition")in r};i.exports=a}),s("mob/view",function(t,e,n){var i=t("mob/lang"),r=t("mob/jqlite"),o=t("mob/events"),s=t("mob/base"),a=t("mob/error"),u=t("mob/template"),c=i.extend,l=i.result,h=i.isFunction,f=/^(\S+)\s*(.*)$/,d=["data","options","el","id","attributes","className","tagName","events"],p=function(t){this.cid=i.uniqueId("view"),c(this,i.pick(t,d)),this._ensureElement(),this.initialize.apply(this,arguments)};c(p.prototype,o,{isDestroyed:!1,tagName:"div",$:function(t){return this.$el.find(t)},"super":function(t){for(var e,n=p.prototype["super"].caller,i=this;i&&h(i[t]);i=i.constructor.__super__)if(e){if(i[t]!=n)return i[t].apply(this,[].slice.call(arguments,1))}else e=!0},initialize:function(){},render:function(){return this},getTemplate:function(){return this.getOption("template")},registerTemplateHelpers:function(){var t=this.getOption("templateHelpers");i.isObject(t)&&u.registerHelpers(t)},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=r(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=l(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(h(n)||(n=this[n]),n){var r=e.match(f);this.delegate(r[1],r[2],i.bind(n,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(l(this,"el"));else{var t=c({},l(this,"attributes"));this.id&&(t.id=l(this,"id")),this.className&&(t["class"]=l(this,"className")),this.setElement(this._createElement(l(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new a('View (cid: "'+this.cid+'") has already been destroyed and cannot be used.')},destroy:function(){return this.isDestroyed?this:(this.isDestroyed=!0,this.remove(),this)},triggerMethod:function(){return s._triggerMethod(this,arguments)},mergeOptions:s.mergeOptions,getOption:s.proxyGetOption,bindEntityEvents:s.proxyBindEntityEvents,unbindEntityEvents:s.proxyUnbindEntityEvents}),p.extend=i.inherits,n.exports=p}),s("mob/platform",function(t,e,n){function i(){g.isReady=!0,g.detect();for(var t=0;t<v.length;t++)v[t]();v=[],u(function(){d.addClass("platform-ready")})}function r(){g.isWebView()?document.addEventListener("deviceready",i,!1):i(),o&&window.removeEventListener("load",r,!1)}var o,s=t("mob/lang"),a=t("mob/jqlite"),u=s.requestAnimationFrame,c=s.getParameterByName,l="ios",h="android",f="windowsphone",d=a("body"),p=null,m=null,v=[],g={navigator:window.navigator,isReady:!1,isFullScreen:!1,platforms:null,grade:null,ua:navigator.userAgent,ready:function(t){g.isReady?t():v.push(t)},detect:function(){g._checkPlatforms(),u(function(){for(var t=0;t<g.platforms.length;t++)d.addClass("platform-"+g.platforms[t])})},setGrade:function(t){var e=g.grade;g.grade=t,u(function(){e&&d.removeClass("grade-"+e),d.addClass("grade-"+t)})},device:function(){return window.device||{}},_checkPlatforms:function(){g.platforms=[];var t="a";g.isWebView()?(g.platforms.push("webview"),window.cordova||window.PhoneGap||window.phonegap?g.platforms.push("cordova"):window.forge&&g.platforms.push("trigger")):g.platforms.push("browser"),g.isIPad()&&g.platforms.push("ipad");var e=g.platform();if(e){g.platforms.push(e);var n=g.version();if(n){var i=n.toString();i.indexOf(".")>0?i=i.replace(".","_"):i+="_0",g.platforms.push(e+i.split("_")[0]),g.platforms.push(e+i),g.isAndroid()&&4.4>n?t=4>n?"c":"b":g.isWindowsPhone()&&(t="b")}}g.setGrade(t)},isWebView:function(){return!!(window.cordova||window.PhoneGap||window.phonegap||window.forge)},isIPad:function(){return/iPad/i.test(g.navigator.platform)?!0:/iPad/i.test(g.ua)},isIOS:function(){return g.is(l)},isAndroid:function(){return g.is(h)},isWindowsPhone:function(){return g.is(f)},isMobile:function(){return!!g.ua.match(/android|webos|ip(hone|ad|od)|opera (mini|mobi|tablet)|iemobile|windows.+(phone|touch)|mobile|fennec|kindle (Fire)|Silk|maemo|blackberry|playbook|bb10\; (touch|kbd)|Symbian(OS)|Ubuntu Touch/i)},platform:function(){return null===p&&g.setPlatform(g.device().platform),p},setPlatform:function(t){p="undefined"!=typeof t&&null!==t&&t.length?t.toLowerCase():c("mobplatform")?c("mobplatform"):g.ua.indexOf("Android")>0?h:/iPhone|iPad|iPod/.test(g.ua)?l:g.ua.indexOf("Windows Phone")>-1?f:g.navigator.platform&&navigator.platform.toLowerCase().split(" ")[0]||""},version:function(){return null===m&&g.setVersion(g.device().version),m},setVersion:function(t){if("undefined"!=typeof t&&null!==t&&(t=t.split("."),t=parseFloat(t[0]+"."+(t.length>1?t[1]:0)),!isNaN(t)))return void(m=t);m=0;var e=g.platform(),n={android:/Android (\d+).(\d+)?/,ios:/OS (\d+)_(\d+)?/,windowsphone:/Windows Phone (\d+).(\d+)?/};n[e]&&(t=g.ua.match(n[e]),t&&t.length>2&&(m=parseFloat(t[1]+"."+t[2])))},is:function(t){if(t=t.toLowerCase(),g.platforms)for(var e=0;e<g.platforms.length;e++)if(g.platforms[e]===t)return!0;var n=g.platform();return n?n===t.toLowerCase():g.ua.toLowerCase().indexOf(t)>=0},exitApp:function(){g.ready(function(){navigator.app&&navigator.app.exitApp&&navigator.app.exitApp()})},showStatusBar:function(t){g._showStatusBar=t,g.ready(function(){u(function(){g._showStatusBar?(window.StatusBar&&window.StatusBar.show(),d.removeClass("status-bar-hide")):(window.StatusBar&&window.StatusBar.hide(),d.addClass("status-bar-hide"))})})},fullScreen:function(t,e){g.isFullScreen=t!==!1,a(document).ready(function(){u(function(){g.isFullScreen?d.addClass("fullscreen"):d.removeClass("fullscreen")}),g.showStatusBar(e===!0)})}};g.initialize=function(){"complete"===document.readyState?r():(o=!0,window.addEventListener("load",r,!1))},n.exports=g}),s("mob/touch",function(t,e,n){function i(t,e){if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=t,this.tapDelay=e.tapDelay||200,this.tapTimeout=e.tapTimeout||700,!i.notNeeded(t)){for(var n=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],o=this,s=0,a=n.length;a>s;s++)o[n[s]]=r.bind(o[n[s]],o);c&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1)}}var r=t("mob/lang"),o=t("mob/jqlite"),s=t("mob/platform"),a=r.isUndefined,u=s.isWindowsPhone(),c=s.isAndroid()&&!u,l=s.isIOS()&&!u,h=l&&/OS [6-7]_\d/.test(navigator.userAgent);i.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(l&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},i.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!c;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},i.prototype.sendClick=function(t,e){var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},i.prototype.determineEventType=function(t){return c&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},i.prototype.focus=function(t){var e;l&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},i.prototype.updateScrollParent=function(t){var e,n;if(e=t.touchEventScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.touchEventScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.touchEventLastScrollTop=e.scrollTop)},i.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},i.prototype.onTouchStart=function(t){var e,n,i;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],l){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},i.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},i.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},i.prototype.findControl=function(t){return a(t.control)?t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea"):t.control},i.prototype.onTouchEnd=function(t){var e,n,i,r,o,s=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,h&&(o=t.changedTouches[0],s=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||s,s.touchEventScrollParent=this.targetElement.touchEventScrollParent),i=s.tagName.toLowerCase(),"label"===i){if(e=this.findControl(s)){if(this.focus(s),c)return!1;s=e}}else if(this.needsFocus(s))return t.timeStamp-n>100||l&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(s),this.sendClick(s,t),l&&"select"===i||(this.targetElement=null,t.preventDefault()),!1);return l&&(r=s.touchEventScrollParent,r&&r.touchEventLastScrollTop!==r.scrollTop)?!0:(this.needsClick(s)||(t.preventDefault(),this.sendClick(s,t)),!1)},i.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},i.prototype.onMouse=function(t){return this.targetElement&&!t.forwardedTouchEvent&&t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),!1):!0},i.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},i.prototype.destroy=function(){var t=this.layer;c&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},i.notNeeded=function(t){var e,n;if(a(window.ontouchstart))return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!c)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}return"none"===t.style.msTouchAction||"none"===t.style.touchAction||"manipulation"===t.style.touchAction?!0:!1},i.initialize=function(t,e){return e=e||o("body"),new i(o(e).get(0),t)},n.exports=i}),s("mob/scroller",function(t,e,i){function r(t,e){this.wrapper=h(t)?document.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var n in e)this.options[n]=e[n];this.translateZ=this.options.HWCompositing&&s.hasPerspective?" translateZ(0)":"",this.options.useTransition=s.hasTransition&&this.options.useTransition,this.options.useTransform=s.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing=h(this.options.bounceEasing)?w[this.options.bounceEasing]||w.circular:this.options.bounceEasing,this.options.resizePolling=f(this.options.resizePolling)?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}var o=t("mob/lang"),s=t("mob/support"),a=t("mob/jqlite"),u=t("mob/error"),c=o.requestAnimationFrame,l=o.now,h=o.isString,f=o.isUndefined,d=s.getPrefixStyle,p=function(t,e,n,i){t.addEventListener(e,n,!!i)},m=function(t,e,n,i){t.removeEventListener(e,n,!!i)},v=function(t){return window.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},g=/Android /.test(window.navigator.appVersion)&&!/Chrome\/\d/.test(window.navigator.appVersion),y={transform:d("transform"),transitionTimingFunction:d("transitionTimingFunction"),transitionDuration:d("transitionDuration"),transitionDelay:d("transitionDelay"),transformOrigin:d("transformOrigin")},b={touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3},w={quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return Math.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t-=1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var e=.22,n=.4;return 0===t?0:1==t?1:n*Math.pow(2,-10*t)*Math.sin(2*(t-e/4)*Math.PI/e)+1}}},E=function(t,e,i,r,o,s){var a,u,c=t-e,l=Math.abs(c)/i;return s=s===n?6e-4:s,a=t+l*l/(2*s)*(0>c?-1:1),u=l/s,r>a?(a=o?r-o/2.5*(l/8):r,c=Math.abs(a-t),u=c/l):a>0&&(a=o?o/2.5*(l/8):0,c=Math.abs(t)+a,u=c/l),{destination:Math.round(a),duration:u}},_=function(t){for(var e=-t.offsetLeft,n=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,n-=t.offsetTop;return{left:e,top:n}},x=function(t,e){for(var n in e)if(e[n].test(t[n]))return!0;return!1},S=function(t,e){var n=document.createEvent("Event");n.initEvent(e,!0,!0),n.pageX=t.pageX,n.pageY=t.pageY,t.target.dispatchEvent(n)},T=function(t){var e,n=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||(e=document.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,t.view,1,n.screenX,n.screenY,n.clientX,n.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),e._constructed=!0,n.dispatchEvent(e))};r.prototype={_init:function(){this._initEvents()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if(!(1!=b[t.type]&&0!==t.button||!this.enabled||this.initiated&&b[t.type]!==this.initiated)){!this.options.preventDefault||g||x(t.target,this.options.preventDefaultException)||t.preventDefault();var e,n=t.touches?t.touches[0]:t;this.initiated=b[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=l(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,e=this.getComputedPosition(),this._translate(Math.round(e.x),Math.round(e.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=n.pageX,this.pointY=n.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&b[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,n,i,r,o=t.touches?t.touches[0]:t,s=o.pageX-this.pointX,a=o.pageY-this.pointY,u=l();if(this.pointX=o.pageX,this.pointY=o.pageY,this.distX+=s,this.distY+=a,i=Math.abs(this.distX),r=Math.abs(this.distY),!(u-this.endTime>300&&10>i&&10>r)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=i>r+this.options.directionLockThreshold?"h":r>=i+this.options.directionLockThreshold?"v":"n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);a=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);s=0}s=this.hasHorizontalScroll?s:0,a=this.hasVerticalScroll?a:0,e=this.x+s,n=this.y+a,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+s/3:e>0?0:this.maxScrollX),(n>0||n<this.maxScrollY)&&(n=this.options.bounce?this.y+a/3:n>0?0:this.maxScrollY),this.directionX=s>0?-1:0>s?1:0,this.directionY=a>0?-1:0>a?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,n),u-this.startTime>300&&(this.startTime=u,this.startX=this.x,this.startY=this.y)}}},_end:function(t){if(this.enabled&&b[t.type]===this.initiated){this.options.preventDefault&&!x(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,n,i=l()-this.startTime,r=Math.round(this.x),o=Math.round(this.y),s=Math.abs(r-this.startX),a=Math.abs(o-this.startY),u=0,c="";if(this.isInTransition=0,this.initiated=0,this.endTime=l(),!this.resetPosition(this.options.bounceTime))return this.scrollTo(r,o),this.moved?this._events.flick&&200>i&&100>s&&100>a?void this._execEvent("flick"):(this.options.momentum&&300>i&&(e=this.hasHorizontalScroll?E(this.x,this.startX,i,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:r,duration:0},n=this.hasVerticalScroll?E(this.y,this.startY,i,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:o,duration:0},r=e.destination,o=n.destination,u=Math.max(e.duration,n.duration),this.isInTransition=1),r!=this.x||o!=this.y?((r>0||r<this.maxScrollX||o>0||o<this.maxScrollY)&&(c=w.quadratic),void this.scrollTo(r,o,u,c)):void this._execEvent("scrollEnd")):(this.options.tap&&S(t,this.options.tap),this.options.click&&T(t),void this._execEvent("scrollCancel"))}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){
t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,n=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?n=0:this.y<this.maxScrollY&&(n=this.maxScrollY),e==this.x&&n==this.y?!1:(this.scrollTo(e,n,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=_(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var n=this._events[t].indexOf(e);n>-1&&this._events[t].splice(n,1)}},_execEvent:function(t){if(this._events[t]){var e=0,n=this._events[t].length;if(n)for(;n>e;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,n,i){t=this.x+t,e=this.y+e,n=n||0,this.scrollTo(t,e,n,i)},scrollTo:function(t,e,n,i){i=i||w.circular,this.isInTransition=this.options.useTransition&&n>0,!n||this.options.useTransition&&i.style?(this._transitionTimingFunction(i.style),this._transitionTime(n),this._translate(t,e)):this._animate(t,e,n,i.fn)},scrollToElement:function(t,e,i,r,o){if(t=t.nodeType?t:this.scroller.querySelector(t)){var s=_(t);s.left-=this.wrapperOffset.left,s.top-=this.wrapperOffset.top,i===!0&&(i=Math.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),r===!0&&(r=Math.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),s.left-=i||0,s.top-=r||0,s.left=s.left>0?0:s.left<this.maxScrollX?this.maxScrollX:s.left,s.top=s.top>0?0:s.top<this.maxScrollY?this.maxScrollY:s.top,e=e===n||null===e||"auto"===e?Math.max(Math.abs(this.x-s.left),Math.abs(this.y-s.top)):e,this.scrollTo(s.left,s.top,e,o)}},_transitionTime:function(t){t=t||0,this.scrollerStyle[y.transitionDuration]=t+"ms",!t&&g&&(this.scrollerStyle[y.transitionDuration]="0.001s")},_transitionTimingFunction:function(t){this.scrollerStyle[y.transitionTimingFunction]=t},_translate:function(t,e){this.options.useTransform?this.scrollerStyle[y.transform]="translate("+t+"px,"+e+"px)"+this.translateZ:(t=Math.round(t),e=Math.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e},_initEvents:function(t){var e=t?m:p,n=this.options.bindToWrapper?this.wrapper:window;e(window,"orientationchange",this),e(window,"resize",this),this.options.click&&e(this.wrapper,"click",this,!0),this.options.disableMouse||(e(this.wrapper,"mousedown",this),e(n,"mousemove",this),e(n,"mousecancel",this),e(n,"mouseup",this)),s.hasPointer&&!this.options.disablePointer&&(e(this.wrapper,v("pointerdown"),this),e(n,v("pointermove"),this),e(n,v("pointercancel"),this),e(n,v("pointerup"),this)),s.hasTouch&&!this.options.disableTouch&&(e(this.wrapper,"touchstart",this),e(n,"touchmove",this),e(n,"touchcancel",this),e(n,"touchend",this)),e(this.scroller,"transitionend",this),e(this.scroller,"webkitTransitionEnd",this),e(this.scroller,"oTransitionEnd",this),e(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,e,n=window.getComputedStyle(this.scroller,null);return this.options.useTransform?(n=n[y.transform].split(")")[0].split(", "),t=+(n[12]||n[4]),e=+(n[13]||n[5])):(t=+n.left.replace(/[^-\d.]/g,""),e=+n.top.replace(/[^-\d.]/g,"")),{x:t,y:e}},_animate:function(t,e,n,i){function r(){var f,d,p,m=l();return m>=h?(o.isAnimating=!1,o._translate(t,e),void(o.resetPosition(o.options.bounceTime)||o._execEvent("scrollEnd"))):(m=(m-u)/n,p=i(m),f=(t-s)*p+s,d=(e-a)*p+a,o._translate(f,d),void(o.isAnimating&&c(r)))}var o=this,s=this.x,a=this.y,u=l(),h=u+n;this.isAnimating=!0,r()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},r.createScroller=function(t,e){if(f(t))throw u("`el` is empty.");return new r(a(t).get(0),o.extend({mouseWheel:!0},e||{}))},i.exports=r}),s("mob/transition",function(t,e,n){function i(t,e,n){c.unshift({screen:t,animation:e,hash:n||location.hash,id:t.attr("id")})}function r(t){var e={up:"down",down:"up",left:"right",right:"left","in":"out",out:"in"};return e[t]||t}var o=t("mob/support"),s=t("mob/lang"),a=t("mob/jqlite"),u=t("mob/logger"),c=[],l=[{name:"cubeleft",is3d:!0},{name:"cuberight",is3d:!0},{name:"dissolve"},{name:"fade"},{name:"flipleft",is3d:!0},{name:"flipright",is3d:!0},{name:"pop",is3d:!0},{name:"swapleft",is3d:!0},{name:"swapright",is3d:!0},{name:"slidedown"},{name:"slideright"},{name:"slideup"},{name:"slideleft"}],h={options:{useAnimations:!0,defaultAnimation:"slideleft",tapBuffer:100,trackScrollPositions:!1,updateHash:!0},$currentScreen:a(".mo-screen.current"),$body:a(".mo-body"),addAnimation:function(t){s.isString(t.name)&&l.push(t)},transit:function(t,e,n,l,f){function d(i){var r=h.options.tapBuffer;o.animationEvents&&n&&h.options.useAnimations?(t.unbind("webkitAnimationEnd",d),t.removeClass(p+" out inmotion"),p&&e.removeClass(p),h.$body.removeClass("animating animating3d"),h.options.trackScrollPositions===!0&&(e.css("top",-e.data("lastScroll")),setTimeout(function(){e.css("top",0),window.scroll(0,e.data("lastScroll")),a(".mo-scroll",e).each(function(){this.scrollTop=-a(this).data("lastScroll")})},0))):(t.removeClass(p+" out inmotion"),p&&e.removeClass(p),r+=260),setTimeout(function(){e.removeClass("in"),window.scroll(0,0)},r),e.trigger("screenAnimationEnd",{direction:"in",animation:n,back:l}),t.trigger("screenAnimationEnd",{direction:"out",animation:n,back:l})}if(l=l?l:!1,s.isUndefined(e)||0===e.length)return!1;if(e.hasClass("current"))return!1;if(a(":focus").trigger("blur"),t.trigger("screenAnimationStart",{direction:"out",back:l}),e.trigger("screenAnimationStart",{direction:"in",back:l}),o.animationEvents&&n&&h.options.useAnimations){!o.transform3d()&&n.is3d&&(u.warn("Did not detect support for 3d animations, falling back to "+h.options.defaultAnimation+"."),n.name=h.options.defaultAnimation);var p=n.name,m=n.is3d?"animating3d":"";l&&(p=p.replace(/left|right|up|down|in|out/,r)),u.warn("finalAnimationName is "+p+"."),setTimeout(function(){d()},250),h.$body.addClass("animating "+m);var v=window.pageYOffset;h.options.trackScrollPositions===!0&&e.css("top",window.pageYOffset-(e.data("lastScroll")||0)),e.addClass(p+" in current"),t.removeClass("current").addClass(p+" out inmotion"),h.options.trackScrollPositions===!0&&(t.data("lastScroll",v),a(".mo-scroll",t).each(function(){a(this).data("lastScroll",h.scrollTop)}))}else e.addClass("current in"),t.removeClass("current"),d();return h.$currentScreen=e,l?c.shift():i(h.$currentScreen,n,f),f&&h.setHash(f),!0},goBack:function(){if(c.length<1)return u.warn("History is empty."),!1;1===c.length&&(u.warn("You are on the first panel."),window.history.go(-1));var t=c[0],e=c[1];return e&&e.screen&&(e.hash&&h.setHash(e.hash),h.transit(t.screen,e.screen,t.animation,!0))?!0:(u.warn("Could not go back."),!1)},goTo:function(t,e,n){var i;if(0===c.length?(0===a(".mo-screen.current").length&&(h.$currentScreen=a(".mo-screen:first-child").addClass("current")),i=h.$currentScreen):i=c[0].screen,"string"==typeof e)for(var r=0,o=l.length;o>r;r++)if(l[r].name===e){e=l[r];break}return h.transit(i,t,e,!1,n)?!0:!1},setHash:function(t){h.options.updateHash&&(location.hash="#"+t.replace(/^#/,""))}};n.exports=h}),s("mob/viewport",function(t,e,n){function i(){var t;for(t=0;t<document.head.children.length;t++)if("viewport"==document.head.children[t].name){s=document.head.children[t];break}if(s){var e,n=s.content.toLowerCase().replace(/\s+/g,"").split(",");for(t=0;t<n.length;t++)n[t]&&(e=n[t].split("="),u[e[0]]=e.length>1?e[1]:"_");r()}}function r(){var t=u.width,e=u.height,n=a.version(),i="device-width",r="device-height",s=c.orientation();delete u.height,u.width=i,a.isIPad()?n>7?delete u.width:a.isWebView()?90==s?u.height="0":7==n&&(u.height=r):7>n&&(u.height="0"):a.isIOS()&&(a.isWebView()?n>7?delete u.width:7>n?e&&(u.height="0"):7==n&&(u.height=r):7>n&&e&&(u.height="0")),(t!==u.width||e!==u.height)&&o()}function o(){var t,e=[];for(t in u)u[t]&&e.push(t+("_"==u[t]?"":"="+u[t]));s.content=e.join(", ")}var s,a=t("mob/platform"),u={},c={orientation:function(){return window.innerWidth>window.innerHeight?90:0},initialize:function(){a.ready(function(){i(),window.addEventListener("orientationchange",function(){setTimeout(r,1e3)},!1)})},_viewportLoadTag:i};n.exports=c}),s("mob/swipe",function(t,e,i){function r(t,e){function i(){b=T.children,_=b.length,b.length<2&&(e.continuous=!1),c&&e.continuous&&b.length<3&&(T.appendChild(b[0].cloneNode(!0)),T.appendChild(T.children[1].cloneNode(!0)),b=T.children),w=new Array(b.length),E=t.getBoundingClientRect().width||t.offsetWidth,T.style.width=b.length*E+"px";for(var n=b.length;n--;){var i=b[n];i.style.width=E+"px",i.setAttribute("data-index",n),c&&(i.style.left=n*-E+"px",p(n,k>n?-E:n>k?E:0,0))}e.continuous&&c&&(p(f(k-1),-E,0),p(f(k+1),E,0)),c||(T.style.left=k*-E+"px"),t.style.visibility="visible"}function r(){e.continuous?d(k-1):k&&d(k-1)}function s(){e.continuous?d(k+1):k<b.length-1&&d(k+1)}function f(t){return(b.length+t%b.length)%b.length}function d(t,n){if(k!=t){if(c){var i=Math.abs(k-t)/(k-t);if(e.continuous){var r=i;i=-w[f(t)]/E,i!==r&&(t=-i*b.length+t)}for(var o=Math.abs(k-t)-1;o--;)p(f((t>k?t:k)-o-1),E*i,0);t=f(t),p(k,E*i,n||M),p(t,0,n||M),e.continuous&&p(f(t-i),-(E*i),0)}else t=f(t),v(k*-E,t*-E,n||M);k=t,h(e.callback(k,b[k]))}}function p(t,e,n){m(t,e,n),w[t]=e}function m(t,e,n){var i=b[t],r=i&&i.style;r&&(r.webkitTransitionDuration=r.MozTransitionDuration=r.msTransitionDuration=r.OTransitionDuration=r.transitionDuration=n+"ms",r.webkitTransform="translate("+e+"px,0)translateZ(0)",r.msTransform=r.MozTransform=r.OTransform="translateX("+e+"px)")}function v(t,n,i){if(!i)return void(T.style.left=n+"px");var r=l(),o=setInterval(function(){var s=l()-r;return s>i?(T.style.left=n+"px",C&&g(),e.transitionEnd.call(event,k,b[k]),void clearInterval(o)):void(T.style.left=(n-t)*(Math.floor(s/i*100)/100)+t+"px")},4)}function g(){x=setTimeout(s,C)}function y(){C=0,clearTimeout(x)}if(t){e=o.extend({startSlide:0,speed:300,auto:0,continuous:!0,disableScroll:!1,stopPropagation:!1,callback:function(t,e){},transitionEnd:function(t,e){}},e||{});var b,w,E,_,x,S,T=t.children[0],k=parseInt(e.startSlide,10),M=e.speed,C=e.auto,P={},A={},O={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":h(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":h(this.transitionEnd(t));break;case"resize":h(i)}e.stopPropagation&&t.stopPropagation()},start:function(t){var e=t.touches[0];P={x:e.pageX,y:e.pageY,time:+new Date},S=n,A={},T.addEventListener("touchmove",this,!1),T.addEventListener("touchend",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){e.disableScroll&&t.preventDefault();var n=t.touches[0];A={x:n.pageX-P.x,y:n.pageY-P.y},o.isUndefined(S)&&(S=!!(S||Math.abs(A.x)<Math.abs(A.y))),S||(t.preventDefault(),y(),e.continuous?(m(f(k-1),A.x+w[f(k-1)],0),m(k,A.x+w[k],0),m(f(k+1),A.x+w[f(k+1)],0)):(A.x=A.x/(!k&&A.x>0||k==b.length-1&&A.x<0?Math.abs(A.x)/E+1:1),m(k-1,A.x+w[k-1],0),m(k,A.x+w[k],0),m(k+1,A.x+w[k+1],0)))}},end:function(t){var n=l()-P.time,i=Number(n)<250&&Math.abs(A.x)>20||Math.abs(A.x)>E/2,r=!k&&A.x>0||k==b.length-1&&A.x<0;e.continuous&&(r=!1);var o=A.x<0;S||(i&&!r?(o?(e.continuous?(p(f(k-1),-E,0),p(f(k+2),E,0)):p(k-1,-E,0),p(k,w[k]-E,M),p(f(k+1),w[f(k+1)]-E,M),k=f(k+1)):(e.continuous?(p(f(k+1),E,0),p(f(k-2),-E,0)):p(k+1,E,0),p(k,w[k]+E,M),p(f(k-1),w[f(k-1)]+E,M),k=f(k-1)),e.callback(k,b[k])):e.continuous?(p(f(k-1),-E,M),p(k,0,M),p(f(k+1),E,M)):(p(k-1,-E,M),p(k,0,M),p(k+1,E,M))),T.removeEventListener("touchmove",O,!1),T.removeEventListener("touchend",O,!1)},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==k&&(C&&g(),e.transitionEnd.call(t,k,b[k]))}};return i(),C&&g(),a?(u&&T.addEventListener("touchstart",O,!1),c&&(T.addEventListener("webkitTransitionEnd",O,!1),T.addEventListener("msTransitionEnd",O,!1),T.addEventListener("oTransitionEnd",O,!1),T.addEventListener("otransitionend",O,!1),T.addEventListener("transitionend",O,!1)),window.addEventListener("resize",O,!1)):window.onresize=function(){i()},{setup:function(){i()},slide:function(t,e){y(),d(t,e)},prev:function(){y(),r()},next:function(){y(),s()},stop:function(){y()},getPos:function(){return k},getNumSlides:function(){return _},kill:function(){y(),T.style.width="",T.style.left="";for(var t=b.length;t--;){var e=b[t];e.style.width="",e.style.left="",c&&m(t,0,0)}a?(T.removeEventListener("touchstart",O,!1),T.removeEventListener("webkitTransitionEnd",O,!1),T.removeEventListener("msTransitionEnd",O,!1),T.removeEventListener("oTransitionEnd",O,!1),T.removeEventListener("otransitionend",O,!1),T.removeEventListener("transitionend",O,!1),window.removeEventListener("resize",O,!1)):window.onresize=null}}}}var o=t("mob/lang"),s=t("mob/support"),a=s.addEventListener,u=s.touch,c=s.transitions,l=o.now,h=function(t){setTimeout(t||o.noop,0)};i.exports=r}),s("mob/template",function(t,e,n){function i(t,e,n){!e&&n&&(e=n),e=a({},e,c._settings);var i=RegExp([(e.escape||h).source,(e.interpolate||h).source,(e.evaluate||h).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(i,function(e,n,i,r,a){return s+=t.slice(o,a).replace(d,p),o=a+e.length,n?s+="'+\n((__t=("+n+"))==null?'':Mob.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var u=new Function(e.variable||"obj","Mob",s)}catch(l){throw l.source=s,l}var f=function(t){return u.call(this,t,r)},m=e.variable||"obj";return f.source="function("+m+"){\n"+s+"}",f}var o=t("mob/lang"),s=t("mob/error"),a=o.defaults,u=o.isFunction,c={},l={insertComponent:function(t){return'<div mo-component="'+t+'"></div>'}},h=/(.)^/,f={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},d=/\\|'|\r|\n|\u2028|\u2029/g;c._settings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},c.config=function(t){return o.extend(c._settings,t||{})},c.registerHelpers=function(t){o.each(t,function(t,e){c.registerHelper(e,t)})},c.registerHelper=function(t,e){if(u(l[t]))throw new s('Helper "'+t+'" already defined.');if(!u(e))throw new s('Typeof helper "'+e+'" is not a function.');l[t]=e};var p=function(t){return"\\"+f[t]};c.compile=function(t,e,n){if(e)return a(e,l),i.apply(this,arguments);var r=i.apply(this,arguments),o=function(t){return t=a({},t,l),r.call(this,t)};return o},n.exports=c}),s("mob/component",function(t,e,n){var i=t("mob/lang"),r=t("mob/view"),o=t("mob/error"),s=t("mob/template"),a=r.extend({tagName:"div",className:"mo-component",serializeData:function(){if(i.isFunction(this.data)){var t=this.data();i.isObject(t)&&(this.data=t)}return{data:this.data||{}}},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.isRendered=!0,this.triggerMethod("render",this),this},_renderTemplate:function(){var t=this.getTemplate();if(t!==!1){if(!t)throw new o("Cannot render the template since it is null or undefined.");this.registerTemplateHelpers();var e=this.serializeData(),n=s.compile(t,e);return this.attachElContent(n),this}},attachElContent:function(t){return this.$el.html(t),this}});n.exports=a}),s("mob/screen",function(t,e,n){var i=t("mob/lang"),r=t("mob/jqlite"),o=t("mob/base"),s=t("mob/class"),a=t("mob/error"),u=s.extend({constructor:function(t){if(this.options=t||{},this.el=this.getOption("el"),this.el=r(this.el).get(0),!this.el)throw new a('An "el" must be specified for a screen.');this.$el=this.getEl(this.el),s.call(this,t)},show:function(t,e){if(this._ensureElement()){this._ensureViewIsIntact(t),o.monitorDOMRefresh(t);var n=e||{},i=t!==this.currentView,r=!!n.preventDestroy,s=!!n.forceShow,a=!!this.currentView,u=i&&!r,c=i||s;return a&&this.triggerMethod("before:swapOut",this.currentView,this,e),this.currentView&&delete this.currentView._parent,u?this.empty():a&&c&&this.currentView.off("destroy",this.empty,this),c?(t.once("destroy",this.empty,this),t.render(),t._parent=this,a&&this.triggerMethod("before:swap",t,this,e),this.triggerMethod("before:show",t,this,e),o.triggerMethodOn(t,"before:show",t,this,e),a&&this.triggerMethod("swapOut",this.currentView,this,e),this.attachHtml(t),this.currentView=t,a&&this.triggerMethod("swap",t,this,e),this.triggerMethod("show",t,this,e),o.triggerMethodOn(t,"show",t,this,e),this):this}},_ensureElement:function(){if(i.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new a('An "el" '+this.$el.selector+" must exist in DOM")}return!0},_ensureViewIsIntact:function(t){if(!t)throw new a("The view passed is undefined and therefore invalid. You must pass a view instance to show.");if(t.isDestroyed)throw new a('View (cid: "'+t.cid+'") has already been destroyed and cannot be used.')},getEl:function(t){return r(t,o._getValue(this.options.parentEl,this))},attachHtml:function(t){this.$el.contents().detach(),this.el.appendChild(t.el)},empty:function(t){var e=this.currentView,n=t||{},i=!!n.preventDestroy;return e?(e.off("destroy",this.empty,this),this.triggerMethod("before:empty",e),i||this._destroyView(),this.triggerMethod("empty",e),delete this.currentView,i&&this.$el.contents().detach(),this):void 0},_destroyView:function(){var t=this.currentView;t.isDestroyed||(t.destroy?t.destroy():(t.remove(),t.isDestroyed=!0))},attachView:function(t){return this.currentView&&delete this.currentView._parent,t._parent=this,this.currentView=t,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildScreen:function(t,e){if(i.isString(t))return this._buildScreenFromSelector(t,e);if(t.selector||t.el||t.screenClass)return this._buildScreenFromObject(t,e);if(i.isFunction(t))return this._buildScreenFromScreenClass(t);throw new a("Improper screen configuration type.")},_buildScreenFromSelector:function(t,e){return new e({el:t})},_buildScreenFromObject:function(t,e){var n=t.screenClass||e,r=i.omit(t,"selector","screenClass");return t.selector&&!r.el&&(r.el=t.selector),new n(r)},_buildScreenFromScreenClass:function(t){return new t}});n.exports=u}),s("mob/screenComponent",function(t,e,n){function i(){this.components||(this.components={}),c(this.components,function(t){t.$el.detach()})}function r(){var t=this;this.componentCreators=this.componentCreators||{},this.componentCreators=o.result(this,"componentCreators"),this.$("[mo-component]").each(function(){var e,n=s(this),i=n.attr("mo-component");if(l(t.components[i])){if(e=t._createComponent(i,n),null===e)return;t.components[i]=e}else e=t.components[i];n.replaceWith(e.$el)}),c(this.components,function(t){t.render()}),o.isFunction(this.onComponentsRendered)&&this.onComponentsRendered.call(this)}var o=t("mob/lang"),s=t("mob/jqlite"),a=t("mob/error"),u=t("mob/logger"),c=o.each,l=o.isUndefined,h={};h.add=function(t){var e={render:t.render,remove:t.remove};t.render=function(){var t=Array.prototype.slice.call(arguments);i.call(this);var n=e.render.apply(this,t);return r.call(this),n},t.renderComponents=function(){o.isEmpty(this.components)?r.call(this):u.info("Components have already rendered!")},t.remove=function(){return this.removeComponents(),e.remove.call(this)},t.removeComponents=function(){this.components&&(c(this.components,function(t){t.remove()}),delete this.components)},t._createComponent=function(t,e){var n=this.componentCreators[t];if(l(n))throw new a("Can not find component creator for component named: "+t);return n.apply(this)}},n.exports=h}),s("mob/screenManager",function(t,e,n){var i=t("mob/lang"),r=t("mob/base"),o=t("mob/class"),s=t("mob/screen"),a=o.extend({constructor:function(t){this._screens={},this.length=0,o.call(this,t),this.addScreens(this.getOption("screens"))},addScreens:function(t,e){return t=r._getValue(t,this,arguments),i.reduce(t,function(t,n,r){return i.isString(n)&&(n={selector:n}),n.selector&&(n=i.defaults({},n,e)),t[r]=this.addScreen(r,n),t},{},this)},addScreen:function(t,e){var n;return n=e instanceof s?e:s.buildScreen(e,s),this.triggerMethod("before:add:screen",t,n),n._parent=this,this._store(t,n),this.triggerMethod("add:screen",t,n),n},get:function(t){return this._screens[t]},getScreens:function(){return i.clone(this._screens)},removeScreen:function(t){var e=this._screens[t];return this._remove(t,e),e},removeScreens:function(){var t=this.getScreens();return i.each(this._screens,function(t,e){this._remove(e,t)},this),t},emptyScreens:function(){var t=this.getScreens();return i.invoke(t,"empty"),t},destroy:function(){return this.removeScreens(),r._triggerMethod(this,"before:destroy",arguments),r._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},_store:function(t,e){this._screens[t]||this.length++,this._screens[t]=e},_remove:function(t,e){this.triggerMethod("before:remove:screen",t,e),e.empty(),e.stopListening(),delete e._parent,delete this._screens[t],this.length--,this.triggerMethod("remove:screen",t,e)}});n.exports=a}),s("mob/screenView",function(t,e,n){var i=t("mob/lang"),r=t("mob/jqlite"),o=t("mob/base"),s=t("mob/logger"),a=t("mob/view"),u=t("mob/screenComponent"),c=t("mob/scroller"),l=a.extend({tagName:"div",className:"mo-screen-view",constructor:function(t){this.render=i.bind(this.render,this),t=o._getValue(t,this),a.call(this,t),u.add(this),o.monitorDOMRefresh(this)},initScroller:function(){return 0===this.$(".mo-scroll-content").length||0===this.$(".mo-scroll").length?void s.error('Can not find both ".mo-scroll-content" and ".mo-scroll" elements.'):void(this.scroller||(this.scroller=new c(this.$(".mo-scroll-content").get(0),{mouseWheel:!0}),r(document).unbind("touchmove.scroller").bind("touchmove.scroller",function(t){t.preventDefault()})))},refreshScroller:function(){var t=this;setTimeout(function(){t.scroller&&t.scroller.refresh()},300)},destroy:function(){if(this.isDestroyed)return this;var t=i.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(t)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(t)),this.isRendered=!1,this.remove(),this}});n.exports=l}),s("mob/router",function(t,e,i){var r=t("mob/lang"),o=t("mob/logger"),s=t("mob/jqlite"),a=t("mob/error"),u=r.isUndefined,c=r.bind,l=r.isFunction,h="hashchange.router",f="([^/\\?]+)",d=/:([\w\d]+)/g,p=/\/\*(?!\*)/,m="/([^/\\?]+)",v=/\*{2}/,g="(.*?)\\??",y=/\/*$/,b=function(t){this.href=t,this.params,this.query,this.splat,this.hasNext=!1};b.prototype.get=function(t,e){return this.params&&!u(this.params[t])?this.params[t]:this.query&&!u(this.query[t])?this.query[t]:u(e)?n:e};var w=function(t){this._options=r.extend({ignorecase:!0},t),this._routes=[],this._befores=[],this._errors={_:function(){},_404:function(t,e){o.warn("404! Unmatched route for url "+e)},_500:function(t,e){o.error("500! Internal error route for url "+e)}},this._paused=!1;var e=c(this._onHashChange,this);s(window).unbind(h).bind(h,e)};w.prototype._onHashChange=function(t){return this._paused||this._route(this._extractFragment(window.location.href)),!0},w.prototype._extractFragment=function(t){var e=t.indexOf("#");return e>=0?t.substring(e):"#/"},w.prototype._throwsRouteError=function(t,e,n){return l(this._errors["_"+t])?this._errors["_"+t](e,n,t):this._errors._(e,n,t),!1},w.prototype._buildRequestObject=function(t,e,n,i){if(!t)throw new a("Unable to compile request object");var r=new b(t);e&&(r.params=e);var o=t.split("?");if(2==o.length){var s=null,u=o[1].split("&");r.query={};for(var c=0,l=u.length;l>c;c++)s=u[c].split("="),r.query[decodeURI(s[0])]=decodeURI(s[1].replace(/\+/g,"%20"));r.query}return n&&n.length>0&&(r.splats=n),i===!0&&(r.hasNext=!0),r},w.prototype._followRoute=function(t,e,n){var i,r=n.splice(0,1),o=this._routes[r],s=e.match(o.path),u={},l=[];if(!o)return this._throwsRouteError(500,new a("Internal error"),t);for(var h=0,f=o.paramNames.length;f>h;h++)u[o.paramNames[h]]=s[h+1];if(h+=1,s&&h<s.length)for(var d=h;d<s.length;d++)l.push(s[d]);var p=0!==n.length,m=c(function(e,n,i,r){return c(function(r,o,s){return r||o?o?this._throwsRouteError(s||500,o,t):void this._followRoute(e,n,i):this._throwsRouteError(500,'Cannot call "next" without an error if request.hasNext is false',t)},this,r)},this)(t,e,n,p);i=this._buildRequestObject(t,u,l,p),o.routeAction(i,m)},w.prototype._routeBefores=function(t,e,n,i,r){var o;if(t.length>0){var s=t.splice(0,1);s=s[0],o=c(function(e,o){return e?this._throwsRouteError(o||500,e,n):void this._routeBefores(t,s,n,i,r)},this)}else o=c(function(t,e){return t?this._throwsRouteError(e||500,t,n):void this._followRoute(n,i,r)},this);e(this._buildRequestObject(n,null,null,!0),o)},w.prototype._route=function(t){var e,n="",i=this._befores.slice(),r=[],o=t;if(0===o.length)return!0;o=o.replace(y,""),e=o.split("?")[0].replace(y,"");for(var s in this._routes)this._routes.hasOwnProperty(s)&&(n=this._routes[s],n.path.test(e)&&r.push(s));if(!(r.length>0))return this._throwsRouteError(404,null,t);if(i.length>0){var a=i.splice(0,1);a=a[0],this._routeBefores(i,a,t,o,r)}else this._followRoute(t,o,r)},w.prototype.pause=function(){return this._paused=!0,this},w.prototype.play=function(t){return t=u(t)?!1:t,this._paused=!1,t&&this._route(this._extractFragment(window.location.href)),this},w.prototype.setLocation=function(t){return window.history.pushState(null,"",t),this},w.prototype.redirect=function(t){return this.setLocation(t),this._paused||this._route(this._extractFragment(t)),this},w.prototype.addRoute=function(t,e){var n,i=this._options.ignorecase?"i":"",o=[];if(r.isString(t)){for(t=t.replace(y,"");null!==(n=d.exec(t));)o.push(n[1]);t=new RegExp(t.replace(d,f).replace(p,m).replace(v,g)+"(?:\\?.+)?$",i)}return this._routes.push({path:t,paramNames:o,routeAction:e}),this},w.prototype.before=function(t){return this._befores.push(t),this},w.prototype.errors=function(t,e){if(r.isNaN(t))throw new a("Invalid code for routes error handling");if(!l(e))throw new a("Invalid callback for routes error handling");return t="_"+t,this._errors[t]=e,this},w.prototype.run=function(t){return t||(t=this._extractFragment(window.location.href)),t=0===t.indexOf("#")?t:"#"+t,this.redirect(t),this},w.prototype.destroy=function(){return s(window).unbind(h),this},i.exports=w}),s("mob/application",function(t,e,n){var i=t("mob/lang"),r=t("mob/base"),o=t("mob/class"),s=t("mob/router"),a=t("mob/screenManager"),u=t("mob/storage"),c=t("mob/logger"),l=i.extend,h=i.isFunction,f=o.extend({constructor:function(t){this._initScreens(t),this.appRouter=new s,this.appCache=new u({name:"appCache",type:"memory"}),this._initRouters(t),l(this,t),o.apply(this,arguments)},start:function(t){var e=t&&t.logPrefix||"[Mob Application]",n=l({autoRunRouter:!0,logLevel:c.WARN,logFormatter:function(t,n){t.unshift(e),n.name&&t.unshift("["+n.name+"]")}},t||{});this.triggerMethod("before:start",t),c.useDefaults({logLevel:n.logLevel,formatter:n.logFormatter}),n.autoRunRouter&&this.appRouter.run(),this.triggerMethod("start",t)},getLocalStorage:function(){return this._initStorage("local")},getSessionStorage:function(){return this._initStorage("session")},getCookie:function(){return this._initStorage("cookie")},addScreens:function(t){return this._screenManager.addScreens(t)},emptyScreens:function(){return this._screenManager.emptyScreens()},removeScreen:function(t){return this._screenManager.removeScreen(t)},getScreen:function(t){return this._screenManager.get(t)},getScreens:function(){return this._screenManager.getScreens()},getScreenManager:function(){return new a},addRouters:function(t){for(var e in t)this.addRouter(e,t[e]);return this},addRouter:function(t,e){return this.appRouter.addRoute(t,e),this},redirect:function(t){return this.appRouter.redirect(t),this},_initRouters:function(t){var e=h(this.routers)?this.routers(t):this.routers||{},n=r.getOption(t,"routers");return h(n)&&(n=n.call(this,t)),l(e,n),this.addRouters(e),this},_initScreens:function(t){var e=h(this.screens)?this.screens(t):this.screens||{};this._initScreenManager();var n=r.getOption(t,"screens");return h(n)&&(n=n.call(this,t)),l(e,n),this.addScreens(e),this},_initScreenManager:function(){this._screenManager=this.getScreenManager(),this._screenManager._parent=this,this.listenTo(this._screenManager,"before:add:screen",function(){r._triggerMethod(this,"before:add:screen",arguments)}),this.listenTo(this._screenManager,"add:screen",function(t,e){this[t]=e,r._triggerMethod(this,"add:screen",arguments)}),this.listenTo(this._screenManager,"before:remove:screen",function(){r._triggerMethod(this,"before:remove:screen",arguments)}),this.listenTo(this._screenManager,"remove:screen",function(t){delete this[t],r._triggerMethod(this,"remove:screen",arguments)})},_initStorage:function(t){var e="__app"+t+"storage";return this[e]||(this[e]=new u({name:e,type:t})),this[e]}});n.exports=f});var a=r.Logger=o("mob/logger");r.Error=o("mob/error"),r.$=r.$||o("mob/jqlite"),r.Class=o("mob/class"),r.Events=o("mob/events"),r.HTTP=o("mob/http"),r.Storage=o("mob/storage"),r.View=o("mob/view"),r.Support=o("mob/support");var u=r.Platform=o("mob/platform");r.initializePlatform=u.initialize;var c=r.Touch=o("mob/touch");r.initializeTouchEvent=c.initialize,r.Scroller=o("mob/scroller");var l=r.Viewport=o("mob/viewport");r.initializeViewport=l.initialize,r.Transition=o("mob/transition"),r.Swipe=o("mob/swipe"),r.Template=o("mob/template"),r.Component=o("mob/component"),r.Screen=o("mob/screen"),r.ScreenManager=o("mob/screenManager"),r.ScreenView=o("mob/screenView"),r.ScreenComponent=o("mob/screenComponent"),r.Router=o("mob/router");var h=r.Application=o("mob/application");r.createApplication=function(t){return new h(t)},r.require=r.requireModule=o,r.define=r.defineModule=s;var f=o("mob/lang");return f.extend(r,f),f.each(["debug","time","timeEnd","info","warn","error","log"],function(t){r[t]=a[t]}),r});
//# sourceMappingURL=mob.min.js.map